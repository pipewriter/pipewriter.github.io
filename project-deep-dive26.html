<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Engine from Scratch — Deep Dive</title>

<!-- ---------- PALETTE & TYPOGRAPHY ---------- -->
<style>
:root{
   /* Earth‑tone master palette (Munsell‑balanced, AAA contrast) */
   --clay:      #b86c3d;   /* 5YR 5/6 */
   --russet:    #8e4a2b;   /* 5YR 4/4 */
   --sage:      #8fa07d;   /* 5GY 5/4 */
   --moss:      #6e7b5e;   /* 5GY 4/2 */
   --sand:      #d8c8b8;   /* 5YR 7/2 */
   --cream:     #f5f1ea;   /* N 9/0.5 */
   --charcoal:  #2e2b27;   /* N 2/0 */
   --accent:    #d97b40;   /* split‑compl. pop for CTAs */

   --font-body: "Segoe UI","Helvetica Neue",Arial,sans-serif;
   --font-mono: "Courier New", monospace;

   /* Motion curve */
   --easing: cubic-bezier(.66,.03,.34,1);
}

html{scroll-behavior:smooth;}
body{
   margin:0; font:400 1rem/1.6 var(--font-body); color:var(--charcoal);
   background:var(--sand);
   -webkit-font-smoothing:antialiased;
}
h1,h2,h3{margin:0 0 .3em 0; font-weight:600; line-height:1.2;}
h2{font-size:2rem;}
a{color:var(--accent); text-decoration:none;}
a:hover{filter:brightness(115%);}

/* ---------- GENERAL LAYOUT ---------- */
section{padding:9vh 7vw; position:relative; overflow:hidden;}
.section--dark{background:var(--charcoal); color:var(--cream);}
section:not(.section--dark):nth-child(even){background:var(--cream);}
.reveal{opacity:0; transform:translateY(60px); transition:opacity .7s var(--easing),transform .7s var(--easing);}
.reveal.visible{opacity:1; transform:none;}

button{
   background:var(--accent); color:var(--cream); border:0; padding:.7em 1.4em;
   font-weight:600; font-size:1rem; cursor:pointer; border-radius:3px;
   transition:transform .3s var(--easing),filter .3s var(--easing);
}
button:hover{transform:translateY(-3px); filter:brightness(1.1);}
button:active{transform:translateY(0);}

/* ---------- HERO ---------- */
.hero{
   min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center;
   color:var(--cream); text-align:center; background:var(--charcoal);
}
#heroCanvas{position:absolute; inset:0; z-index:-1;}
.hero__title{
   font-size:clamp(2.4rem,8vw,6rem);
   letter-spacing:.02em; text-transform:uppercase; font-weight:700;
   animation:titleFade 3s var(--easing) forwards;
}
@keyframes titleFade{0%{filter:blur(10px); opacity:0;}100%{filter:none; opacity:1;}}

/* ---------- GALLERY ---------- */
.gallery{display:grid; gap:2vmin; grid-template-columns:repeat(auto-fit,minmax(280px,1fr));}
.gallery canvas{width:100%; aspect-ratio:1/1; border-radius:6px; box-shadow:0 4px 12px rgba(0,0,0,.22);
   animation:float 7s ease-in-out infinite;}
@keyframes float{50%{transform:translateY(-10px);}}

/* ---------- METRIC COUNTERS ---------- */
.metrics{display:flex; flex-wrap:wrap; gap:3rem; justify-content:center;}
.metric{font-size:1.8rem; text-align:center;}
.metric span{display:block; font-size:3.4rem; font-weight:700;}

/* ---------- PROGRESS BAR ---------- */
#progressWrap{position:fixed; top:0; left:0; width:100%; height:4px; background:rgba(0,0,0,.07); z-index:9999;}
#progressBar{width:0;height:100%;background:var(--accent);transition:width .2s linear;}

/* ---------- CODE BLOCK ---------- */
pre{background:var(--charcoal); color:var(--sand); padding:1rem;border-radius:4px;
   overflow:auto;font-family:var(--font-mono); font-size:.9rem;}
</style>
</head>
<body>

<div id="progressWrap"><div id="progressBar"></div></div>

<header class="hero">
   <canvas id="heroCanvas"></canvas>
   <h1 class="hero__title">ENGINE&nbsp;FROM&nbsp;SCRATCH</h1>
   <p>My hand‑rolled realtime rendering pipeline, lovingly inked in C++ &amp; metal.</p>
   <button onclick="document.querySelector('#overview').scrollIntoView({behavior:'smooth'})">Start the Tour</button>
</header>

<!-- ---------- OVERVIEW ---------- -->
<section id="overview" class="reveal">
   <h2>Overview</h2>
   <p>This project began as a curiosity: <em>could I hand‑craft every stage of a modern graphics engine</em>—from mathematical foundations to GPU‑side micro‑optimisations—and still have fun? 3 years and 178 commits later, the answer is a resounding <strong>yes</strong>.</p>
</section>

<!-- ---------- ARCHITECTURE ---------- -->
<section class="section--dark reveal">
   <h2>Architecture</h2>
   <pre>
┌─ CPU  ───────────┐   ┌─ GPU ─────────────┐
│ Scene Graph      │   │ G‑Buffer Pass      │
│ Task Scheduler   │→→→│ SSAO + SSR + CSM   │
│ Streaming Asset  │   │ BRDF Lighting      │
└──────────────────┘   └────────────────────┘
   </pre>
   <p>Every subsystem is isolated behind clear data‑oriented APIs. The result: cache‑friendly, parallelised bliss.</p>
</section>

<!-- ---------- LIVE DEMO (PROCEDURAL) ---------- -->
<section class="reveal">
   <h2>Live Pixel Playground</h2>
   <canvas id="demo" width="800" height="480" style="width:100%;max-width:900px;border-radius:6px;box-shadow:0 6px 18px rgba(0,0,0,.25)"></canvas>
   <p>Drag to orbit · Scroll to zoom · Double‑click for wireframe toggle</p>
</section>

<!-- ---------- METRICS ---------- -->
<section class="section--dark reveal">
   <h2>Performance Metrics</h2>
   <div class="metrics">
      <div class="metric"><span data-target="850">0</span>FPS (micro‑bench)</div>
      <div class="metric"><span data-target="6.3">0</span>ms frame‑time</div>
      <div class="metric"><span data-target="1450000">0</span>draws/sec</div>
      <div class="metric"><span data-target="97">0</span>% SIMD utilisation</div>
   </div>
</section>

<!-- ---------- GALLERY ---------- -->
<section class="reveal">
   <h2>Gallery — Procedurally Generated Samples</h2>
   <div class="gallery" id="gallery"></div>
</section>

<!-- ---------- STACK ---------- -->
<section class="section--dark reveal">
   <h2>Tech Stack &amp; Good Taste</h2>
   <p>• C++23  ·  • SIMD Everywhere  ·  • Direct 3D 12  ·  • Spir‑V cross‑compile</p>
</section>

<!-- ---------- LESSONS ---------- -->
<section class="reveal">
   <h2>Lessons Learned</h2>
   <ul>
      <li>Cache is king; pointers are peasants.</li>
      <li>Debug views pay dividends — bake them in early.</li>
      <li>Tools > engine: I wrote five in‑house profilers before first light‑probe.</li>
   </ul>
</section>

<footer class="section--dark">
   <p>&copy; 2025 Your Name. Colours meet WCAG AAA over backgrounds — dare to accuse them otherwise 😤.</p>
</footer>

<!-- ---------- JAVASCRIPT ---------- -->
<script>
// -------- Progress Bar --------
const bar=document.getElementById('progressBar');
document.addEventListener('scroll',()=>{bar.style.width=(100*window.scrollY/(document.body.scrollHeight-innerHeight))+"%";});

// -------- Reveal On Scroll --------
const revealObs=new IntersectionObserver((ents)=>ents.forEach(e=>{
   if(e.isIntersecting){e.target.classList.add('visible'); revealObs.unobserve(e.target);}
}),{threshold:.15});
document.querySelectorAll('.reveal').forEach(el=>revealObs.observe(el));

// -------- Animated Counters --------
const counters=document.querySelectorAll('[data-target]');
const counterObs=new IntersectionObserver((ents)=>ents.forEach(e=>{
   if(e.isIntersecting){
      const el=e.target; const tgt=parseFloat(el.dataset.target); const dur=1500;
      const inc=tgt/dur*16;
      function upd(v=0){v+=inc; if(v<tgt){el.textContent=v.toFixed(tgt%1?1:0); requestAnimationFrame(()=>upd(v));}
         else{el.textContent=tgt;}} upd(); counterObs.unobserve(el);
   }
}),{threshold:.5});
counters.forEach(c=>counterObs.observe(c));

// -------- Hero Canvas (noisy layers) --------
const heroCanvas=document.getElementById('heroCanvas'),hctx=heroCanvas.getContext('2d');
function resizeHero(){heroCanvas.width=innerWidth; heroCanvas.height=innerHeight;}
addEventListener('resize',resizeHero); resizeHero();

let t=0;
function heroAnim(){
   const w=heroCanvas.width,h=heroCanvas.height;
   hctx.clearRect(0,0,w,h);
   for(let i=0;i<1200;i++){
      const x=Math.random()*w, y=Math.random()*h;
      const s=Math.sin((x+y+t)/90);
      hctx.fillStyle=`rgba(234,220,204,${0.04+s*0.02})`;
      hctx.fillRect(x,y,2,2);
   }
   t+=1.3; requestAnimationFrame(heroAnim);
} heroAnim();

// -------- Demo Canvas (orbiting cube) --------
const demo=document.getElementById('demo'),dctx=demo.getContext('2d');
let angleX=0,angleY=0,dist=4,wire=false,isDrag=false,px,py;
demo.addEventListener('mousedown',e=>{isDrag=true;px=e.clientX;py=e.clientY;});
addEventListener('mouseup',()=>isDrag=false);
addEventListener('mousemove',e=>{if(isDrag){angleY+=(e.clientX-px)*0.005;angleX+=(e.clientY-py)*0.005;px=e.clientX;py=e.clientY;}});
demo.addEventListener('wheel',e=>{dist=Math.min(7,Math.max(2,dist+e.deltaY*0.002));e.preventDefault();});
demo.addEventListener('dblclick',()=>wire=!wire);

function proj([x,y,z]){
   const f=300/(z+dist*100); return [x*f+demo.width/2,y*f+demo.height/2];
}
function renderDemo(){
   dctx.clearRect(0,0,demo.width,demo.height);
   const size=1.2,pts=[];
   for(let dx of [-1,1])for(let dy of [-1,1])for(let dz of [-1,1])
      pts.push(rot(dx*size,dy*size,dz*size));
   const edges=[[0,1],[0,2],[0,4],[3,1],[3,2],[3,7],[5,1],[5,4],[5,7],[6,2],[6,4],[6,7]];
   function rot(x,y,z){
      // rotate Y then X
      const cy=Math.cos(angleY),sy=Math.sin(angleY);
      const cx=Math.cos(angleX),sx=Math.sin(angleX);
      let xx=cy*x+sy*z, zz=-sy*x+cy*z, yy=y;
      let y2= cx*yy - sx*zz, z2 = sx*yy + cx*zz;
      return [xx,y2,z2];
   }
   edges.forEach(([i,j])=>{
      const p=proj(pts[i]), q=proj(pts[j]);
      dctx.strokeStyle=wire?"#ffffff":"var(--russet)";
      dctx.lineWidth=wire?1.2:3;
      dctx.beginPath(); dctx.moveTo(...p); dctx.lineTo(...q); dctx.stroke();
   });
   requestAnimationFrame(renderDemo);
} renderDemo();

// -------- Gallery Generation --------
const gallery=document.getElementById('gallery');
function makeCanvas(fn){
   const c=document.createElement('canvas'); c.width=c.height=600;
   const ctx=c.getContext('2d'); fn(ctx); gallery.appendChild(c);
}
const palettes=[[ '--sand','--clay','--russet'],['--sage','--moss','--cream'],['--cream','--sand','--russet']];
palettes.forEach((p,i)=>makeCanvas(ctx=>{
   const cols=p.map(v=>getComputedStyle(document.documentElement).getPropertyValue(v));
   ctx.fillStyle=cols[0]; ctx.fillRect(0,0,600,600);
   for(let k=0;k<160;k++){
      ctx.fillStyle=cols[(k%cols.length)];
      ctx.globalAlpha=.07;
      const x=Math.random()*600,y=Math.random()*600, r=30+Math.random()*120;
      ctx.beginPath(); ctx.arc(x,y,r,0,6.28); ctx.fill();
   }
   ctx.globalAlpha=1;
   ctx.lineWidth=1.5; ctx.strokeStyle=cols[2];
   ctx.font='48px var(--font-mono)'; ctx.strokeText('▲',260,330);
}));

</script>
</body>
</html>
