<html><body style="margin:0;overflow:hidden"><script type="module">import * as T from'https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js';import{VRButton as V}from'https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/webxr/VRButton.js';const S=new T.Scene();S.background=new T.Color(0xa0c9ff);const C=new T.PerspectiveCamera(70,innerWidth/innerHeight,.1,1000);C.position.set(8,8,20);const R=new T.WebGLRenderer({antialias:true});R.setSize(innerWidth,innerHeight);R.xr.enabled=true;document.body.appendChild(R.domElement);document.body.appendChild(V.createButton(R));S.add(new T.HemisphereLight(0xffffff,0x444444,1));S.add(new T.DirectionalLight(0xffffff,0.5));const G=new T.BoxGeometry(1,1,1),M=new Map(),k=(x,y,z)=>x+','+y+','+z;function add(x,y,z){if(M.has(k(x,y,z)))return;const m=new T.Mesh(G,new T.MeshStandardMaterial({color:0x55aa55}));m.position.set(x+.5,y+.5,z+.5);S.add(m);M.set(k(x,y,z),m)}function rem(x,y,z){const id=k(x,y,z);if(!M.has(id))return;S.remove(M.get(id));M.delete(id)}for(let x=0;x<16;x++)for(let z=0;z<16;z++)add(x,0,z);const rc=new T.Raycaster(),v2=new T.Vector2();function act(pt,dir,del){rc.set(pt,dir);const h=rc.intersectObjects([...M.values()])[0];if(h){const p=h.object.position.clone().addScalar(-.5).round();if(del)rem(p.x,p.y,p.z);else{const n=h.face.normal;add(p.x+n.x,p.y+n.y,p.z+n.z)}}}addEventListener('pointerdown',e=>{v2.set(e.clientX/innerWidth*2-1,-(e.clientY/innerHeight*2-1));rc.setFromCamera(v2,C);const h=rc.intersectObjects([...M.values()])[0];if(h){const p=h.object.position.clone().addScalar(-.5).round();if(e.shiftKey)rem(p.x,p.y,p.z);else{const n=h.face.normal;add(p.x+n.x,p.y+n.y,p.z+n.z)}}});['selectstart'].forEach(ev=>{const a=R.xr.getController(0),b=R.xr.getController(1);[a,b].forEach((ctl,i)=>{ctl.addEventListener(ev,()=>{const m=ctl.matrixWorld;act(new T.Vector3().setFromMatrixPosition(m),new T.Vector3(0,0,-1).applyMatrix4(new T.Matrix4().extractRotation(m)),!!i)});S.add(ctl)})});addEventListener('resize',()=>{C.aspect=innerWidth/innerHeight;C.updateProjectionMatrix();R.setSize(innerWidth,innerHeight)});R.setAnimationLoop(()=>R.render(S,C));</script></body></html>