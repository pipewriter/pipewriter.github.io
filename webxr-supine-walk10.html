<html><head><meta charset="utf-8"><style>body{margin:0;overflow:hidden}</style><script type="module">import * as THREE from"https://unpkg.com/three@0.161.0/build/three.module.js";import{VRButton}from"https://unpkg.com/three@0.161.0/examples/jsm/webxr/VRButton.js";import{XRControllerModelFactory}from"https://unpkg.com/three@0.161.0/examples/jsm/webxr/XRControllerModelFactory.js";let scene,camera,renderer,rig,controllers={},prev=0,turnCooldown=0;init();function init(){scene=new THREE.Scene();scene.background=new THREE.Color(0x88ccee);camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.1,1e3);rig=new THREE.Group();rig.add(camera);scene.add(rig);renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=true;document.body.appendChild(renderer.domElement);document.body.appendChild(VRButton.createButton(renderer));addEventListener("resize",()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight)});scene.add(new THREE.HemisphereLight(0xffffff,0x444444,1));let floor=new THREE.Mesh(new THREE.PlaneGeometry(200,200,10,10),new THREE.MeshStandardMaterial({color:0x228822}));floor.rotation.x=-Math.PI/2;scene.add(floor);for(let i=0;i<200;i++){let g=Math.random()>.5?new THREE.BoxGeometry(1,Math.random()*5+1,1):new THREE.SphereGeometry(Math.random()+.5,16,16);let m=new THREE.MeshStandardMaterial({color:new THREE.Color(Math.random(),Math.random(),Math.random())});let o=new THREE.Mesh(g,m);o.position.set((Math.random()-.5)*80,0.5,(Math.random()-.5)*80);scene.add(o);}const f=new XRControllerModelFactory();["left","right"].forEach((h,i)=>{let c=renderer.xr.getController(i);c.addEventListener("connected",e=>{controllers[h]=e.data.gamepad});c.addEventListener("disconnected",()=>{delete controllers[h]});rig.add(c);let g=renderer.xr.getControllerGrip(i);g.add(f.createControllerModel(g));scene.add(g);});renderer.setAnimationLoop(loop);}function loop(t){let dt=(t-prev)/1e3;prev=t;if(renderer.xr.isPresenting){let gp=controllers.right;if(gp){let up=new THREE.Vector3();up.copy(camera.up).applyQuaternion(camera.quaternion);rig.position.add(up.multiplyScalar(-gp.axes[3]*dt*2));}turnCooldown-=dt;gp=controllers.left;if(gp&&turnCooldown<=0){let x=gp.axes[2];if(Math.abs(x)>.6){rig.rotateOnWorldAxis(camera.getWorldDirection(new THREE.Vector3()).normalize(),THREE.MathUtils.degToRad(-30*Math.sign(x)));turnCooldown=.3;}}}renderer.render(scene,camera);}</script></head><body></body></html>