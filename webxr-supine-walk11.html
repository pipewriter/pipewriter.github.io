
<html><head><meta charset="utf-8"><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import*as T from'https://cdn.jsdelivr.net/npm/three@0.160.0/+esm';import{VRButton as V}from'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/webxr/VRButton.js/+esm';const s=new T.Scene(),c=new T.PerspectiveCamera(70,innerWidth/innerHeight,.1,1e4),r=new T.WebGLRenderer({antialias:!0});r.setSize(innerWidth,innerHeight);r.xr.enabled=!0;document.body.appendChild(r.domElement);document.body.appendChild(V.createButton(r));const g=new T.Group();g.add(c);s.add(g);s.add(new T.HemisphereLight(16777215,4473924,1));const d=new T.Mesh(new T.PlaneGeometry(1e4,1e4),new T.MeshBasicMaterial({color:2242978,wireframe:!0}));d.rotation.x=-Math.PI/2;s.add(d);for(let i=0;i<500;i++){const m=new T.Mesh(new T.BoxGeometry(10,10,10),new T.MeshBasicMaterial({color:16777215*Math.random()}));m.position.set(500*(Math.random()-.5),.5*Math.random()+5,-500*(Math.random()-.5));s.add(m)}let L=null,R=null,lt=0;r.xr.addEventListener("sessionstart",()=>{for(const i of r.xr.getSession().inputSources)"left"===i.handedness?L=i:"right"===i.handedness&&(R=i)});window.addEventListener("resize",()=>{c.aspect=innerWidth/innerHeight,c.updateProjectionMatrix(),r.setSize(innerWidth,innerHeight)});const spd=.05,turn=Math.PI/8,dead=.2;let pv=performance.now();r.setAnimationLoop(()=>{const n=performance.now(),dt=n-pv;pv=n,R&&R.gamepad&&(()=>{const a=R.gamepad.axes,fy=-a[1],sx=a[0];if(Math.abs(fy)>dead){const up=new T.Vector3(0,1,0).applyQuaternion(r.xr.getCamera(c).quaternion);g.position.addScaledVector(up,fy*spd*dt)}if(Math.abs(sx)>dead){const rt=new T.Vector3(1,0,0).applyQuaternion(r.xr.getCamera(c).quaternion);g.position.addScaledVector(rt,sx*spd*dt)}})(),L&&L.gamepad&&(()=>{const hx=L.gamepad.axes[0];Math.abs(hx)>.8&&n-lt>300&&(g.rotation.y-=Math.sign(hx)*turn,lt=n)})(),r.render(s,c)});</script></body></html>
