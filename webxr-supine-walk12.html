<html><head><meta charset="utf-8"><title>Supine Walker</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import * as THREE from"https://unpkg.com/three@0.158.0/build/three.module.js";import{VRButton}from"https://unpkg.com/three@0.158.0/examples/jsm/webxr/VRButton.js";const scene=new THREE.Scene();scene.background=new THREE.Color(0x88ccee);const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,.1,1e3);const renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=!0;document.body.append(renderer.domElement,VRButton.createButton(renderer));const floor=new THREE.Mesh(new THREE.PlaneGeometry(200,200,10,10),new THREE.MeshStandardMaterial({color:0x228833,wireframe:!0}));floor.rotation.x=-Math.PI/2;scene.add(floor);scene.add(new THREE.HemisphereLight(16777215,0x444444,1));for(let i=0;i<200;i++){const b=new THREE.Mesh(new THREE.BoxGeometry(1,1,1),new THREE.MeshStandardMaterial({color:Math.random()*16777215}));b.position.set((Math.random()-.5)*50,.5+i*.5,(Math.random()-.5)*50);scene.add(b);}const player=new THREE.Group();player.add(camera);scene.add(player);let prevTurn=0;const turnAngle=Math.PI/8,q=new THREE.Quaternion();function handleControllers(){const s=renderer.xr.getSession();if(!s)return;for(const src of s.inputSources){if(!src.gamepad)continue;const a=src.gamepad.axes,h=src.handedness;if(h==="left"){const x=a[2]??a[0];if(Math.abs(x)>.6&&Date.now()-prevTurn>250){player.rotation.y-=Math.sign(x)*turnAngle;prevTurn=Date.now();}}if(h==="right"){const y=a[3]??a[1];if(Math.abs(y)>.1){const dir=new THREE.Vector3(0,1,0);camera.getWorldQuaternion(q);dir.applyQuaternion(q).normalize();player.position.add(dir.multiplyScalar(-y*.05));}}}}function animate(){renderer.setAnimationLoop(()=>{handleControllers();renderer.render(scene,camera);});}animate();addEventListener("resize",()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight);});</script></body></html>