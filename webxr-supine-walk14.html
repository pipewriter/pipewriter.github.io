
<html><head><meta charset="utf-8"><title>Supine Walking Simulator</title><style>body{margin:0;overflow:hidden;background:#000}</style></head><body><script type="module">import * as THREE from'https://unpkg.com/three@0.152.2/build/three.module.js';import{VRButton}from'https://unpkg.com/three@0.152.2/examples/jsm/webxr/VRButton.js';const scene=new THREE.Scene(),renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setPixelRatio(devicePixelRatio);renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=!0;document.body.appendChild(renderer.domElement);document.body.appendChild(VRButton.createButton(renderer));const rig=new THREE.Group;scene.add(rig);const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,.1,1e3);camera.position.set(0,1.6,0);rig.add(camera);scene.add(new THREE.HemisphereLight(16777215,4473924,1));const ground=new THREE.Mesh(new THREE.PlaneGeometry(500,500,50,50),new THREE.MeshStandardMaterial({color:2246866,wireframe:!0}));ground.rotation.x=-Math.PI/2;scene.add(ground);for(let i=0;i<200;i++){const c=new THREE.Mesh(new THREE.BoxGeometry(.5,.5,.5),new THREE.MeshStandardMaterial({color:Math.random()*16777215}));c.position.set((Math.random()-.5)*50,.25,(Math.random()-.5)*50);scene.add(c);}let p=0,k=0;renderer.setAnimationLoop(e=>{const d=(e-p)/1e3;p=e;k-=d;const s=renderer.xr.getSession();if(s)for(const src of s.inputSources){if(!src.gamepad)continue;const a=src.gamepad.axes;if('right'===src.handedness){const m=-a[3];if(Math.abs(m)>.2){const v=new THREE.Vector3(0,1,0).applyQuaternion(camera.quaternion);v.y=0;v.normalize();rig.position.addScaledVector(v,3*m*d);}}else if('left'===src.handedness){const x=a[2]??a[0];if(Math.abs(x)>.8&&k<=0){rig.rotateY(-Math.sign(x)*Math.PI/6);k=.35;}}}renderer.render(scene,camera)});addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight)});</script></body></html>
