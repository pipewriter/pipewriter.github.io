
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Supine Walking Simulator</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import*as THREE from'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';import{VRButton}from'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/webxr/VRButton.js';const scene=new THREE.Scene();scene.background=new THREE.Color(0x88ccee);const renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=true;document.body.appendChild(renderer.domElement);document.body.appendChild(VRButton.createButton(renderer));const player=new THREE.Group();scene.add(player);const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,0.1,1e3);player.add(camera);const light=new THREE.HemisphereLight(16777215,4473924,1);scene.add(light);const ground=new THREE.Mesh(new THREE.PlaneGeometry(1e3,1e3).rotateX(-Math.PI/2),new THREE.MeshStandardMaterial({color:2241378}));scene.add(ground);for(let i=0;i<200;i++){const geo=Math.random()<.5?new THREE.BoxGeometry():new THREE.SphereGeometry(.5,16,16),mat=new THREE.MeshStandardMaterial({color:Math.random()*16777215}),mesh=new THREE.Mesh(geo,mat);mesh.position.set((Math.random()-.5)*100,Math.random()*10+1,(Math.random()-.5)*100);scene.add(mesh);}let controllerRight,controllerLeft;function handle(src){const c=renderer.xr.getController(src.index);src.handedness==='right'?controllerRight=c:controllerLeft=c;}renderer.xr.addEventListener('sessionstart',()=>{const s=renderer.xr.getSession();s.addEventListener('inputsourceschange',e=>{e.added.forEach(src=>handle(src));});});let turnReady=0;const speed=3;renderer.setAnimationLoop(t=>{const d=t/1e3;if(controllerRight&&controllerRight.gamepad){const m=-controllerRight.gamepad.axes[3];Math.abs(m)>.1&&(player.position.y+=m*speed*d);}if(controllerLeft&&controllerLeft.gamepad){const tx=controllerLeft.gamepad.axes[2];if(Math.abs(tx)>.8&&!turnReady){player.rotation.y-=Math.sign(tx)*Math.PI/6;turnReady=1;}else if(Math.abs(tx)<.2)turnReady=0;}renderer.render(scene,camera);});addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight);});</script></body></html>
