<html><head><meta charset="utf-8"><title>Supine Walker</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import*as THREE from'https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.module.js';import{VRButton}from'https://cdn.jsdelivr.net/npm/three@0.150.1/examples/jsm/webxr/VRButton.js';let scene=new THREE.Scene();scene.background=new THREE.Color(0x101020);let camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,.01,1e3);let renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=true;document.body.appendChild(renderer.domElement);document.body.appendChild(VRButton.createButton(renderer));scene.add(new THREE.HemisphereLight(16777215,0x444444,1));let g=new THREE.PlaneGeometry(200,200,50,50);g.rotateX(-Math.PI/2);scene.add(new THREE.Mesh(g,new THREE.MeshStandardMaterial({color:0x303030,wireframe:true})));for(let i=0;i<300;i++){let h=1+9*Math.random();let b=new THREE.Mesh(new THREE.BoxGeometry(1+2*Math.random(),h,1+2*Math.random()),new THREE.MeshStandardMaterial({color:Math.random()*16777215}));b.position.set((Math.random()-.5)*100,h/2,-20-80*Math.random());scene.add(b);}let refSpace,spd=.05,cd=0,delay=300;renderer.xr.addEventListener('sessionstart',()=>{renderer.xr.getSession().requestReferenceSpace('local').then(r=>refSpace=r)});function input(f){let s=renderer.xr.getSession();if(!s)return;for(let src of s.inputSources){if(!src.gamepad)continue;let a=src.gamepad.axes;let hand=src.handedness;if(hand==='right'){let vy=-a[3];if(Math.abs(vy)>.2){let pose=f.getViewerPose(refSpace);if(pose){let dir=new THREE.Vector3(0,1,0).applyQuaternion(new THREE.Quaternion().fromArray(pose.transform.orientation)).normalize();camera.position.addScaledVector(dir,vy*spd);}}}else if(hand==='left'){let vx=a[2],now=performance.now();if(Math.abs(vx)>.6&&now>cd){scene.rotation.y+=vx>0?-Math.PI/4:Math.PI/4;cd=now+delay;}}}}renderer.setAnimationLoop((t,f)=>{if(f)input(f);renderer.render(scene,camera)});addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight)});</script></body></html>