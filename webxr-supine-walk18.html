
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Supine Walking Simulator XR</title><style>body{margin:0;overflow:hidden}</style></head><body></body><script type="module">import*as T from'https://unpkg.com/three@0.152.0/build/three.module.js';import{VRButton as V}from'https://unpkg.com/three@0.152.0/examples/jsm/webxr/VRButton.js';const s=new T.Scene(),c=new T.PerspectiveCamera(75,innerWidth/innerHeight,.1,1e3),r=new T.WebGLRenderer({antialias:!0});r.setSize(innerWidth,innerHeight);r.xr.enabled=!0;document.body.appendChild(r.domElement);document.body.appendChild(V.createButton(r));const g=new T.Group();g.add(c);s.add(g);const G=new T.PlaneGeometry(1e3,1e3,10,10),M=new T.MeshStandardMaterial({color:0x226622}),p=new T.Mesh(G,M);p.rotation.x=-Math.PI/2;s.add(p);for(let i=0;i<200;i++){const q=new T.BoxGeometry(2,Math.random()*10+1,2),m=new T.MeshStandardMaterial({color:Math.random()*16777215}),b=new T.Mesh(q,m);b.position.set((Math.random()-.5)*400,.5,(Math.random()-.5)*400);s.add(b)}s.add(new T.HemisphereLight(16777215,0x444444,1));const d=new T.DirectionalLight(16777215,.8);d.position.set(5,10,7.5);s.add(d);let h=0;const v=.05,A=Math.PI/6,D=.2;r.setAnimationLoop(()=>{const e=r.xr.getSession();if(e){const n=e.inputSources;for(let o=0;o<n.length;o++){const t=n[o];if(!t.gamepad)continue;const a=t.gamepad,l=t.handedness,x=a.axes;if(l==='right'){const y=x[3]??x[1]??0;if(Math.abs(y)>D){const U=new T.Vector3();U.set(c.matrixWorld.elements[4],c.matrixWorld.elements[5],c.matrixWorld.elements[6]);g.position.addScaledVector(U,-y*v)}}else if(l==='left'){const f=x[2]??x[0]??0;if(Math.abs(f)>.8&&Date.now()-h>300){g.rotation.y+=f>0?-A:A;h=Date.now()}}}}r.render(s,c)});addEventListener('resize',()=>{c.aspect=innerWidth/innerHeight;c.updateProjectionMatrix();r.setSize(innerWidth,innerHeight)});</script></html>
