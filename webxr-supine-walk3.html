
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Supine Walking Simulator</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import * as THREE from"https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js";import{VRButton}from"https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/webxr/VRButton.js";import{XRControllerModelFactory}from"https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/webxr/XRControllerModelFactory.js";let scene=new THREE.Scene();scene.background=new THREE.Color(0x202030);let camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,.1,1e3),rig=new THREE.Group();rig.add(camera);scene.add(rig);let renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setPixelRatio(devicePixelRatio);renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=!0;document.body.append(renderer.domElement,VRButton.createButton(renderer));let factory=new XRControllerModelFactory,ctrs=[];for(let i=0;i<2;i++){let c=renderer.xr.getController(i);scene.add(c);let g=renderer.xr.getControllerGrip(i);g.add(factory.createControllerModel(g));scene.add(g);ctrs.push(c)}let speed=3,snap=Math.PI/6,snapReady=!0,clock=new THREE.Clock;function fill(){let b=new THREE.BoxGeometry(1,1,1);for(let i=0;i<200;i++){let m=new THREE.Mesh(b,new THREE.MeshStandardMaterial({color:Math.random()*16777215}));m.position.set((Math.random()-.5)*20,Math.random()*200,(Math.random()-.5)*20);scene.add(m)}scene.add(new THREE.HemisphereLight(16777215,4463680,1))}fill();function render(){let dt=clock.getDelta();ctrs.forEach(c=>{let g=c.gamepad;if(!g)return;let a=g.axes;if(a.length<4)return;let f=-a[3];if(Math.abs(f)>.2){let dir=new THREE.Vector3(0,1,0).applyQuaternion(camera.quaternion).normalize();rig.position.addScaledVector(dir,f*speed*dt)}let t=a[0];Math.abs(t)>.8&&snapReady&&(rig.rotation.y+=t>0?-snap:snap,snapReady=!1);Math.abs(t)<.2&&(snapReady=!0)});renderer.render(scene,camera)}renderer.setAnimationLoop(render);addEventListener("resize",()=>{camera.aspect=innerWidth/innerHeight,camera.updateProjectionMatrix(),renderer.setSize(innerWidth,innerHeight)});</script></body></html>
