<html><head><meta charset="utf-8"><title>Supine Walking Simulator</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import*as THREE from"https://cdn.jsdelivr.net/npm/three@0.162/build/three.module.js";import{VRButton}from"https://cdn.jsdelivr.net/npm/three@0.162/examples/jsm/webxr/VRButton.js";const scene=new THREE.Scene();scene.background=new THREE.Color(0x88ccee);const camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.1,1e3);const renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight);renderer.xr.enabled=!0;document.body.appendChild(renderer.domElement);document.body.appendChild(VRButton.createButton(renderer));const supinePivot=new THREE.Object3D;supinePivot.add(camera);scene.add(supinePivot);supinePivot.rotation.x=-Math.PI/2;const floor=new THREE.Mesh(new THREE.PlaneGeometry(1e3,1e3,10,10),new THREE.MeshStandardMaterial({color:0x228822}));floor.rotation.x=-Math.PI/2;scene.add(floor);const light=new THREE.HemisphereLight(16777215,0x444444);light.position.set(0,200,0);scene.add(light);const colors=[16711680,65280,255,16776960,16711935,65535];for(let i=0;i<200;i++){const geo=Math.random()<.5?new THREE.BoxGeometry(2,2,2):new THREE.SphereGeometry(1,16,16),mat=new THREE.MeshStandardMaterial({color:colors[Math.floor(Math.random()*colors.length)]}),mesh=new THREE.Mesh(geo,mat);mesh.position.set(200*(Math.random()-.5),5*Math.random()+1,200*(Math.random()-.5));scene.add(mesh)}let prev=0,snap=0;const SNAP_INTERVAL=.3,SNAP_ANGLE=Math.PI/4;renderer.setAnimationLoop((t,f)=>{if(f){const s=renderer.xr.getSession(),dt=(t-prev)/1e3;prev=t;for(const src of s.inputSources){if(!src.gamepad||!src.handedness)continue;const gp=src.gamepad,a=gp.axes;if("right"===src.handedness){const moveX=a[2]||0,moveY=a[3]||0,spd=3,right=new THREE.Vector3(1,0,0).applyQuaternion(supinePivot.quaternion),forward=new THREE.Vector3(0,0,-1).applyQuaternion(supinePivot.quaternion),mv=forward.multiplyScalar(-moveY).add(right.multiplyScalar(moveX));supinePivot.position.add(mv.multiplyScalar(spd*dt))}if("left"===src.handedness){const lx=a[2]||0;if(Math.abs(lx)>.5&&snap<=0){supinePivot.rotation.y-=Math.sign(lx)*SNAP_ANGLE;snap=SNAP_INTERVAL}}}snap>0&&(snap-=dt)}renderer.render(scene,camera)});window.addEventListener("resize",()=>{camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)})</script></body></html>