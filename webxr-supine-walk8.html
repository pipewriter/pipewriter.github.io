
<!DOCTYPE html><html><head><meta charset="utf-8"><title>Supine Walking Simulator</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import*as T from'https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.module.js';import{VRButton as V}from'https://cdn.jsdelivr.net/npm/three@0.155.0/examples/jsm/webxr/VRButton.js';let s=new T.Scene(),c=new T.PerspectiveCamera(70,innerWidth/innerHeight,.1,1e3),r=new T.WebGLRenderer({antialias:!0});r.setSize(innerWidth,innerHeight);r.xr.enabled=!0;document.body.appendChild(r.domElement);document.body.appendChild(V.createButton(r));let p=new T.Group;p.add(c);s.add(p);addEventListener('resize',()=>{c.aspect=innerWidth/innerHeight,c.updateProjectionMatrix(),r.setSize(innerWidth,innerHeight)});s.add(new T.HemisphereLight(16777215,4461568,1));let g=new T.Mesh(new T.PlaneGeometry(500,500),new T.MeshStandardMaterial({color:0x228822}));g.rotation.x=-Math.PI/2,s.add(g);for(let i=0;i<200;i++){let a=Math.random()>.5?new T.BoxGeometry(1+3*Math.random(),1+3*Math.random(),1+3*Math.random()):new T.SphereGeometry(.5+1.5*Math.random(),8,8),m=new T.MeshStandardMaterial({color:16777215*Math.random()}),o=new T.Mesh(a,m);o.position.set(200*(Math.random()-.5),1+Math.random()*2,200*(Math.random()-.5)),s.add(o)}let l=new T.Clock,S=3,E=Math.PI/6,h=!0;r.setAnimationLoop(()=>{let n=l.getDelta(),e=r.xr.getSession();if(e){let t=Array.from(e.inputSources).filter(d=>d.gamepad),u=(t[0]?.handedness)=='left'?t[0]:t.find(d=>d.handedness=='left'),f=(t[0]?.handedness)=='right'?t[0]:t.find(d=>d.handedness=='right');if(f){let d=f.gamepad.axes[3]||0,v=new T.Vector3(0,1,0).applyQuaternion(c.quaternion).normalize();p.position.addScaledVector(v,-d*S*n)}if(u){let d=u.gamepad.axes[2]||0;Math.abs(d)>.8&&h&&(p.rotation.y-=Math.sign(d)*E,h=!1),Math.abs(d)<.2&&(h=!0)}}r.render(s,c)});</script></body></html>
