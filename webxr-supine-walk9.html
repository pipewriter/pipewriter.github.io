
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><title>Supine Walking Simulator</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js";import {VRButton} from "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/webxr/VRButton.js";const scene=new THREE.Scene();scene.background=new THREE.Color(0x88ccff);scene.add(new THREE.HemisphereLight(0xffffff,0x444444));const renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=!0;document.body.append(renderer.domElement,VRButton.createButton(renderer));const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,.1,1e3),player=new THREE.Group();player.add(camera);scene.add(player);const ground=new THREE.Mesh(new THREE.PlaneGeometry(500,500).rotateX(-Math.PI/2),new THREE.MeshPhongMaterial({color:0x228822}));scene.add(ground);for(let i=0;i<200;i++){const geo=Math.random()>.5?new THREE.BoxGeometry(.5+2*Math.random(),.5+2*Math.random(),.5+2*Math.random()):new THREE.SphereGeometry(.5+Math.random(),16,16),mat=new THREE.MeshStandardMaterial({color:Math.random()*16777215}),m=new THREE.Mesh(geo,mat);m.position.set(200*(Math.random()-.5),3*Math.random(),200*(Math.random()-.5));scene.add(m)}let leftGP,rightGP,turnCD=0;function sources(){const s=renderer.xr.getSession();if(!s)return;leftGP=rightGP=null;for(const i of s.inputSources)if(i.gamepad){"left"===i.handedness?leftGP=i.gamepad:rightGP=i.gamepad}}function animate(){sources();const sp=.1;if(rightGP){const fy=-(rightGP.axes[3]||0);if(Math.abs(fy)>.1){const dir=new THREE.Vector3(0,1,0).applyQuaternion(camera.quaternion).normalize();player.position.addScaledVector(dir,fy*sp)}}if(leftGP){const lx=(leftGP.axes[2]??leftGP.axes[0])||0;if(Math.abs(lx)>.8&&!turnCD){player.rotateY((lx>0?-1:1)*Math.PI/6);turnCD=15}}turnCD&&turnCD--;renderer.render(scene,camera)}renderer.setAnimationLoop(animate);addEventListener("resize",()=>{camera.aspect=innerWidth/innerHeight,camera.updateProjectionMatrix(),renderer.setSize(innerWidth,innerHeight)})</script></body></html>
