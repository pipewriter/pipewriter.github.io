<!DOCTYPE html><html><head><meta charset="utf-8"><title>WebXR WFC</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import*as THREE from'https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.module.js';import{VRButton}from'https://cdn.jsdelivr.net/npm/three@0.159.0/examples/jsm/webxr/VRButton.js';const scene=new THREE.Scene(),camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.1,100);camera.position.set(0,20,0);camera.lookAt(0,0,0);const renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=true;document.body.appendChild(renderer.domElement);document.body.appendChild(VRButton.createButton(renderer));addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight)});scene.add(new THREE.HemisphereLight(0xffffff,0x444444,1));scene.add(new THREE.DirectionalLight(0xffffff,.6));const colors=[0xff3344,0x33ff44,0x3344ff,0xffff33,0xff33ff,0x33ffff,0xff8833],S=10,cells=[];for(let y=0;y<S;y++)for(let x=0;x<S;x++)cells.push({x,y,opts:[0,1,2,3,4,5,6],val:null});const id=(x,y)=>y*S+x,dirs=[[1,0],[-1,0],[0,1],[0,-1]],prop=s=>{for(;s.length;){const c=s.pop();for(const d of dirs){const nx=c.x+d[0],ny=c.y+d[1];if(nx<0||ny<0||nx>=S||ny>=S)continue;const n=cells[id(nx,ny)];if(n.val!=null)continue;const b=n.opts.length;n.opts=n.opts.filter(o=>o!==c.val);if(!n.opts.length)n.opts=[0,1,2,3,4,5,6];if(n.opts.length<b)s.push(n)}}},collapse=()=>{for(;;){let m=9,c=null;for(const cell of cells)if(cell.val==null&&cell.opts.length<m){m=cell.opts.length;c=cell}if(!c)break;c.val=c.opts[Math.random()*c.opts.length|0];c.opts=[c.val];prop([c])}};collapse();const off=(S-1)/2;for(const c of cells){const box=new THREE.Mesh(new THREE.BoxGeometry(.9,.4,.9),new THREE.MeshStandardMaterial({color:colors[c.val],emissive:colors[c.val],emissiveIntensity:.5}));box.position.set(c.x-off,0,c.y-off);scene.add(box)}renderer.setAnimationLoop(()=>renderer.render(scene,camera));</script></body></html>