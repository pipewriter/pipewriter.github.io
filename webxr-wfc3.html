<html><head><meta charset="utf-8"><title>WebXR WFC</title><style>body{margin:0}</style></head><body></body><script type="module">import* as THREE from'https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js';import{VRButton}from'https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/webxr/VRButton.js';const scene=new THREE.Scene(),camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.1,1e3);camera.position.set(0,20,0);camera.lookAt(0,0,0);const renderer=new THREE.WebGLRenderer({antialias:1});renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=1;document.body.appendChild(renderer.domElement);document.body.appendChild(VRButton.createButton(renderer));addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight,camera.updateProjectionMatrix(),renderer.setSize(innerWidth,innerHeight)});const N=10,S=1,colors=[16711680,65280,255,16776960,16711935,65535,16777215],poss=[];for(let x=0;x<N;x++){poss[x]=[];for(let y=0;y<N;y++)poss[x][y]=[0,1,2,3,4,5,6]}const prop=(x,y,c)=>{for(const[dX,dY]of[[1,0],[-1,0],[0,1],[0,-1]]){const nx=x+dX,ny=y+dY;if(nx<0||ny<0||nx>=N||ny>=N)continue;let arr=poss[nx][ny];if(arr.length>1){arr=arr.filter(v=>v!==c);arr.length!==poss[nx][ny].length&&(poss[nx][ny]=arr,arr.length===1&&prop(nx,ny,arr[0]))}}},collapse=(x,y)=>{const opts=poss[x][y],c=opts[Math.random()*opts.length|0];poss[x][y]=[c],prop(x,y,c)};for(;;){let m=8,co=null;for(let x=0;x<N;x++)for(let y=0;y<N;y++){const l=poss[x][y].length;l>1&&l<m&&(m=l,co=[x,y])}if(!co)break;collapse(...co)}for(let x=0;x<N;x++)for(let y=0;y<N;y++){const idx=poss[x][y][0],box=new THREE.Mesh(new THREE.BoxGeometry(S,.2,S),new THREE.MeshStandardMaterial({color:colors[idx]}));box.position.set((x-N/2)*S+S/2,0,(y-N/2)*S+S/2),scene.add(box)}scene.add(new THREE.DirectionalLight(16777215,.8).position.set(5,10,7),new THREE.AmbientLight(16777215,.4));renderer.setAnimationLoop(()=>renderer.render(scene,camera));</script></html>