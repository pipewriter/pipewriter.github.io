<html><head><meta charset="utf-8"><title>WebXR WFC</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import * as THREE from'https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js';import{VRButton}from'https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/webxr/VRButton.js';const N=20,colors=[0xff0033,0x33ff00,0x0033ff,0xffff00,0xff00ff,0x00ffff,0xffffff],scene=new THREE.Scene(),camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,.1,1e3),renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(innerWidth,innerHeight);renderer.xr.enabled=true;document.body.appendChild(renderer.domElement);document.body.appendChild(VRButton.createButton(renderer));camera.position.set(N/2,20,N/2);camera.lookAt(N/2,0,N/2);scene.add(new THREE.HemisphereLight(0xffffff,0x222222,1));const mats=colors.map(c=>new THREE.MeshStandardMaterial({color:c,emissive:c,emissiveIntensity:.5})),grid=Array.from({length:N},()=>Array.from({length:N},()=>[0,1,2,3,4,5,6])),ent=(i,j)=>grid[i][j].length,nei=(i,j)=>[[i-1,j],[i+1,j],[i,j-1],[i,j+1]].filter(([x,y])=>x>=0&&x<N&&y>=0&&y<N),col=(i,j)=>{const o=grid[i][j],c=o[Math.random()*o.length|0];grid[i][j]=[c]},pro=s=>{for(;s.length;){const[i,j]=s.pop(),v=grid[i][j][0];nei(i,j).forEach(([x,y])=>{const o=grid[x][y];if(o.length>1){const n=o.filter(a=>a!==v);n.length!==o.length&&(grid[x][y]=n,n.length===1&&s.push([x,y]))}})}},run=()=>{let u=!0;for(;u;){u=!1;let m=8,c=[];for(let i=0;i<N;i++)for(let j=0;j<N;j++){const e=ent(i,j);e>1&&(u=!0,e<m?(m=e,c=[[i,j]]):e===m&&c.push([i,j]))}if(!u)break;const[d0,d1]=c[Math.random()*c.length|0];col(d0,d1);pro([[d0,d1]])}};run();for(let i=0;i<N;i++)for(let j=0;j<N;j++){const idx=grid[i][j][0],box=new THREE.Mesh(new THREE.BoxGeometry(1,.2,1),mats[idx]);box.position.set(i+.5,0,j+.5);scene.add(box)}const floor=new THREE.Mesh(new THREE.PlaneGeometry(N,N),new THREE.MeshStandardMaterial({color:0x111111}));floor.rotation.x=-Math.PI/2;floor.position.set(N/2,-.11,N/2);scene.add(floor);addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight)});renderer.setAnimationLoop(()=>renderer.render(scene,camera));</script></body></html>