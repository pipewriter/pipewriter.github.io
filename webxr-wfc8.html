
<!DOCTYPE html><html><head><meta charset="utf-8"/><title>WebXR WFC</title><style>body{margin:0;overflow:hidden}</style></head><body><script type="module">import*as T from"https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js";import{VRButton as V}from"https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/webxr/VRButton.js";const S=10,N=7,c=[0xff0044,0x44ff00,0x0066ff,0xffff00,0xff00ff,0x00ffff,0xffffff],r=[[0,1,2],[0,1,2],[1,2,3,4],[2,3,4,5],[3,4,5,6],[4,5,6],[5,6,0]],w=()=>{let p=[...Array(S)].map(()=>[...Array(S)].map(()=>new Set([...Array(N).keys()])));for(;;){let m=N+1,x=-1,y=-1;for(let j=0;j<S;j++)for(let i=0;i<S;i++){let s=p[j][i].size;if(s>1&&s<m){m=s;x=i;y=j}}if(x<0)break;let a=p[y][x],t=[...a][Math.random()*a.size|0];a.clear();a.add(t);let st=[[x,y]];while(st.length){let[ux,uy]=st.pop(),u=p[uy][ux];for(let[dx,dy]of[[1,0],[-1,0],[0,1],[0,-1]]){let vx=ux+dx,vy=uy+dy;if(vx<0||vy<0||vx>=S||vy>=S)continue;let v=p[vy][vx],b=v.size;for(let val of v){let ok=false;for(let uval of u){if(r[uval].includes(val)){ok=true;break}}if(!ok)v.delete(val)}if(!v.size)return null;if(v.size<b)st.push([vx,vy])}}}return[...Array(S)].map((_,j)=>[...Array(S)].map((__,i)=>[...p[j][i]][0]))};let g=null;while(!g)g=w();const scene=new T.Scene();scene.background=new T.Color(0x202020);const cam=new T.PerspectiveCamera(70,innerWidth/innerHeight,0.1,1000);cam.position.set(0,S*1.2,0);cam.lookAt(0,0,0);const ren=new T.WebGLRenderer({antialias:true});ren.setSize(innerWidth,innerHeight);ren.xr.enabled=true;document.body.appendChild(ren.domElement);document.body.appendChild(V.createButton(ren));scene.add(new T.AmbientLight(0xffffff,0.6));let d=new T.DirectionalLight(0xffffff,0.6);d.position.set(1,1,1);scene.add(d);const geo=new T.BoxGeometry(0.9,0.9,0.9),mat=c.map(k=>new T.MeshStandardMaterial({color:k}));for(let j=0;j<S;j++)for(let i=0;i<S;i++){let m=mat[g[j][i]],o=new T.Mesh(geo,m);o.position.set(i-S/2+0.5,0,j-S/2+0.5);scene.add(o)}window.addEventListener("resize",()=>{cam.aspect=innerWidth/innerHeight;cam.updateProjectionMatrix();ren.setSize(innerWidth,innerHeight)});ren.setAnimationLoop(()=>ren.render(scene,cam));</script></body></html>
